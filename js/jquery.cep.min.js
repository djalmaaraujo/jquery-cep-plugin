/*
 *  Project: jQuery CEP Plugin
 *  Description: Return informations about an Brazilian CEP (postal code)
 *  Author: Djalma AraÃºjo
 * http://djalmaaraujo.com.br/share/jquery.cep/
 *  License: MIT License
 */
(function(a,b,c,d){function g(b,c){this.element=b,this.options=a.extend({},f,c),this._defaults=f,this._name=e,this.init()}var e="jCep",f={gateway:"http://apps.pianolab.com.br/wscep/",json_template:{result:"resultado",result_message:"resultado_txt",state:"uf",city:"cidade",neighborhood:"bairro",street_type:"tipo_logradouro",street:"logradouro"},callback:".jcep-target",request:{cep:null,format:"javascript"}};g.prototype.init=function(){this.hdlrInputWatch()},g.prototype.hdlrInputWatch=function(){var b=this,c=a(b.element);switch(b.element.localName){case"input":b.element.type=="text"&&c.keyup(function(c){if(c.keyCode==189||c.keyCode>=48&&c.keyCode<=57||c.keyCode>=96&&c.keyCode<=105){var d=a(this).val();b.validateCep(d)&&b.makeRequest(d)}});break;case"select":b.element.type=="select-one"&&c.change(function(){var c=a(this).val();b.validateCep(c)&&b.makeRequest(c)})}},g.prototype.makeRequest=function(b){var c=this;c.options.request.cep=b,a.getScript(c.options.gateway+"?cep="+b+"&format="+c.options.request.format,function(a,b){b=="success"&&c.parseCallBack(resultadoCEP)},"JSON")},g.prototype.parseCallBack=function(b){this.options.request.result=b;var c=this.options,d=c.callback,e=this.jsonTemplateParser(c.request.result);a.isPlainObject(d.prototype)?d(e):this.outPutHtmlTemplate(e)},g.prototype.jsonTemplateParser=function(b){var c=this.options.json_template,d={};return a.each(c,function(a,c){d[a]=b[c]}),d},g.prototype.outPutHtmlTemplate=function(b){var c=this,d=c.options.callback,e=a(d).addClass("jcep-container");a.each(c.options.json_template,function(c,d){e.append(a("<div />").addClass("jcep-"+c).text(b[c]))})},g.prototype.validateCep=function(a){var b=/^\d{5}-\d{3}$|^\d{8}$/;return a.match(b)?!0:!1},a.fn[e]=function(b){return this.each(function(){a.data(this,"plugin_"+e)||a.data(this,"plugin_"+e,new g(this,b))})}})(jQuery,window,document)